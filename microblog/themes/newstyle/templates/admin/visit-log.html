{% extends theme('admin/layout.html') %}
{% set active = 'index' %}
{% block title %}访问管理{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-lg-3">
            <ul class="nav nav-pills nav-stacked">
                <li><a href="{{ url_for('admin.show_people') }}">用户管理</a></li>
                <li><a href="{{ url_for('admin.show_microblog') }}">微博管理</a></li>
                <li><a href="{{ url_for('admin.show_login_log') }}">登陆管理</a></li>
                <li class="active"><a href="{{ url_for('admin.show_visit_log') }}">访问管理</a></li>
            </ul>
        </div>
        <div class="col-lg-9">
            <table class="table table-hover table-responsive">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th style="width: 20%; white-space: normal; word-break: break-all; word-wrap: break-word;">URL</th>
                        <th>Method</th>
                        <th style="width: 20%; white-space: normal; word-break: break-all; word-wrap: break-word;">Referrer</th>
                        <th>平台</th>
                        <th>浏览器</th>
                        <th>版本</th>
                        <th>IP</th>
                        <th>访问时间</th>
                        <th>用户名</th>
                    </tr>
                </thead>
                <tbody>
                    {% for visit_log in visit_logs %}
                    <tr id="{{ visit_log.id }}">
                        <td>{{ visit_log.id }}</td>
                        <td style="width: 20%; white-space: normal; word-break: break-all; word-wrap: break-word;">{{ visit_log.url }}</td>
                        <td>{{ visit_log.method }}</td>
                        <td style="width: 20%; white-space: normal; word-break: break-all; word-wrap: break-word;">{{ visit_log.referrer }}</td>
                        <td>{{ visit_log.platform }}</td>
                        <td>{{ visit_log.browser }}</td>
                        <td>{{ visit_log.version }}</td>
                        <td>{{ visit_log.client_ip }}</td>
                        <td>{{ visit_log.visit_time }}</td>
                        <td>{{ visit_log.people.nickname if visit_log.people_id else 'N/A'}}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {{ render_pagination(pagination, 'admin.show_visit_log' ) }}
        </div>
    </div>
</div>
{% endblock %}
